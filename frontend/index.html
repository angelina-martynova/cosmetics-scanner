<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–°–∫–∞–Ω–µ—Ä –∫–æ—Å–º–µ—Ç–∏—á–Ω–∏—Ö —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/mobile.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>–°–∫–∞–Ω–µ—Ä –∫–æ—Å–º–µ—Ç–∏—á–Ω–∏—Ö —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤</h1>
        <div class="auth-buttons" id="authButtons">
          <button id="loginBtn">–£–≤—ñ–π—Ç–∏</button>
          <button id="registerBtn">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
        </div>
        <div class="user-menu hidden" id="userMenu">
          <span>–í—ñ—Ç–∞—î–º–æ, <span id="userEmail"></span></span>
          <button id="myScansBtn">–ú–æ—ó —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è</button>
          <button id="logoutBtn">–í–∏–π—Ç–∏</button>
        </div>
      </header>

      <main>
        <div id="inputMethods">
          <!-- –í–∏–±—ñ—Ä –º–µ—Ç–æ–¥—É –≤–≤–µ–¥–µ–Ω–Ω—è -->
          <div class="method-card" onclick="openCamera()">
            <div class="icon">üì∑</div>
            <h3>–°–∫–∞–Ω—É–≤–∞—Ç–∏ –∫–∞–º–µ—Ä–æ—é</h3>
            <p>–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—É–π—Ç–µ –µ—Ç–∏–∫–µ—Ç–∫—É</p>
          </div>

          <div class="method-card" onclick="openTextInput()">
            <div class="icon">üìù</div>
            <h3>–í–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç</h3>
            <p>–°–∫–æ–ø—ñ—é–π—Ç–µ —Å–∫–ª–∞–¥ –≤—Ä—É—á–Ω—É</p>
          </div>
        </div>

        <!-- –ü—Ä–∏—Ö–æ–≤–∞–Ω—ñ —ñ–Ω–ø—É—Ç–∏ -->
        <input
          type="file"
          id="cameraInput"
          accept="image/*"
          capture="environment"
          style="display: none"
        />
        <input
          type="file"
          id="galleryInput"
          accept="image/*"
          style="display: none"
        />

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ -->
        <div class="result" id="result"></div>
      </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –∫–∞–º–µ—Ä–∏ -->
    <div id="cameraModal" class="modal hidden">
      <div class="modal-content">
        <h3>–°–∫–∞–Ω—É–≤–∞–Ω–Ω—è –∫–∞–º–µ—Ä–æ—é</h3>
        <div class="camera-preview">
          <video id="cameraVideo" autoplay playsinline></video>
          <canvas id="cameraCanvas" style="display: none"></canvas>
        </div>
        <div class="camera-controls">
          <button id="captureBtn">üì∏ –ó—Ä–æ–±–∏—Ç–∏ –∑–Ω—ñ–º–æ–∫</button>
          <button id="retakeBtn" class="hidden">üîÑ –ü–µ—Ä–µ–∑–Ω—è—Ç–∏</button>
          <button id="usePhotoBtn" class="hidden">‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ñ–æ—Ç–æ</button>
          <button onclick="openGallery()">üìÇ –í–∏–±—Ä–∞—Ç–∏ –∑ –≥–∞–ª–µ—Ä–µ—ó</button>
          <button onclick="closeCamera()">‚ùå –°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É -->
    <div id="textInputModal" class="modal hidden">
      <div class="modal-content">
        <h3>–í–≤–µ–¥—ñ—Ç—å —Å–∫–ª–∞–¥ –∫–æ—Å–º–µ—Ç–∏–∫–∏</h3>
        <textarea
          id="manualTextInput"
          placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: Aqua, Glycerin, Sodium Laureth Sulfate..."
          rows="8"
        ></textarea>
        <div class="modal-actions">
          <button onclick="processManualText()">–ê–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏</button>
          <button onclick="closeTextInput()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
          <!-- –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ -->
          <button id="fileUploadBtn" onclick="triggerFileInput()">
            –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª
          </button>
          <input
            type="file"
            id="fileInput"
            accept=".txt,.pdf,.doc,.docx"
            style="display: none"
            onchange="handleFileSelect(event)"
          />
        </div>
      </div>
    </div>

    <script src="static/js/app.js"></script>
  </body>
</html>
